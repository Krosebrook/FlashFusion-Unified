# TypeScript Fixes Plan for Visualization Canvas Component

## Issues Identified

1. **Missing Module Declarations**

   - Error: Cannot find module 'react', 'lucide-react', and 'mermaid' or their corresponding type declarations
   - Cause: Missing next-env.d.ts file or type declarations

2. **Duplicate Property in Object Literal**

   - Error: An object literal cannot have multiple properties with the same name
   - Location: Line 29 in visualization-canvas.tsx
   - Cause: Duplicate 'primaryBorderColor' property in the mermaid initialization

3. **JSX Elements with Implicit 'any' Type**
   - Error: JSX element implicitly has type 'any' because no interface 'JSX.IntrinsicElements' exists
   - Cause: Missing React type declarations

## Solution Steps

### 1. Create next-env.d.ts File

Create a next-env.d.ts file in the project root with the following content:

```typescript
/// <reference types="next" />
/// <reference types="next/types/global" />
/// <reference types="next/image-types/global" />
```

This file is typically generated by Next.js when you run the development server for the first time.

### 2. Fix Duplicate Property in Mermaid Initialization

Remove or rename one of the duplicate 'primaryBorderColor' properties in the mermaid initialization:

```typescript
// Current code with duplicate property
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
  themeVariables: {
    primaryColor: "#8B5CF6",
    primaryTextColor: "#fff",
    primaryBorderColor: "#7C3AED", // First occurrence
    lineColor: "#5B21B6",
    secondaryColor: "#14B8A6",
    tertiaryColor: "#EC4899",
    background: "#1F2937",
    mainBkg: "#111827",
    secondBkg: "#1F2937",
    tertiaryBkg: "#374151",
    primaryBorderColor: "#4B5563", // Duplicate property
    fontFamily: "Inter, sans-serif",
  },
});

// Fixed code
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
  themeVariables: {
    primaryColor: "#8B5CF6",
    primaryTextColor: "#fff",
    primaryBorderColor: "#7C3AED",
    lineColor: "#5B21B6",
    secondaryColor: "#14B8A6",
    tertiaryColor: "#EC4899",
    background: "#1F2937",
    mainBkg: "#111827",
    secondBkg: "#1F2937",
    tertiaryBkg: "#374151",
    borderColor: "#4B5563", // Renamed to avoid duplication
    fontFamily: "Inter, sans-serif",
  },
});
```

### 3. Verify TypeScript Configuration

Ensure that the tsconfig.json file includes the necessary configuration for JSX:

```json
{
  "compilerOptions": {
    "jsx": "react-jsx"
    // other options...
  }
}
```

### 4. Install Missing Type Declarations (if needed)

If the above steps don't resolve all issues, install the necessary type declarations:

```bash
npm install --save-dev @types/react @types/react-dom @types/mermaid
```

## Testing

After implementing these changes, run the TypeScript compiler to verify that all errors have been resolved:

```bash
npx tsc --noEmit
```

This will check for TypeScript errors without generating output files.
